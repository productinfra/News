(function(t){function e(e){for(var a,n,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"02be":function(t,e,s){},"1bb5":function(t,e,s){"use strict";s("e518")},"1d3e":function(t,e,s){"use strict";s("97d8")},2141:function(t,e,s){},"399f":function(t,e,s){"use strict";s("51b9")},"495f":function(t,e,s){"use strict";s("7a44")},"4f34":function(t,e,s){},"4fc0":function(t,e,s){"use strict";s("5c20")},"51b9":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"page"},[e("HeadBar"),e("router-view"),e("Footer"),e("el-backtop",{attrs:{right:400,bottom:150}})],1)])},o=[],n=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("span",{staticClass:"logo",on:{click:t.goIndex}},[t._v("The News Forum")]),e("div",{staticClass:"day-of-word"}),e("div",{staticClass:"btns"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLogin,expression:"!isLogin"}]},[e("a",{staticClass:"login-btn",on:{click:t.goLogin}},[t._v("Login")]),e("a",{staticClass:"login-btn",on:{click:t.goSignUp}},[t._v("Sign Up")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"user-box"},[e("span",{staticClass:"user"},[t._v(t._s(t.currUsername))]),e("div",{staticClass:"dropdown-content"},[e("a",{on:{click:t.goLogout}},[t._v("Logout")])])])])])},r=[],l=(s("14d9"),{name:"HeadBar",created(){this.$store.commit("init")},mounted(){this.$bus.$on("pageNumber",t=>{this.pageNumber=t}),this.$bus.$on("pageSize",t=>{this.pageSize=t})},computed:{isLogin(){return this.$store.getters.isLogin},currUsername(){return console.log(this.$store.getters.username),this.$store.getters.username}},methods:{goIndex(){this.$router.push({name:"Home"})},goLogin(){this.$router.push({name:"Login"})},goSignUp(){this.$router.push({name:"SignUp"})},goLogout(){this.$store.commit("logout")}},data(){return{pageNumber:1,pageSize:10}}}),c=l,u=(s("b1af"),s("2877")),d=Object(u["a"])(c,n,r,!1,null,"357c1f6c",null),m=d.exports,p=function(){var t=this,e=t._self._c;return e("div",[e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"grid-content bg-purple-dark footer"},[e("ul",{staticClass:"friends-link"},[e("li",[e("a",{attrs:{href:"https://github.com/productinfra/News"}},[t._v("Github")])])]),e("h2",{staticClass:"compony"},[t._v("Team 10")])])])],1)],1)},h=[],g={name:"Footer"},v=g,f=(s("399f"),Object(u["a"])(v,p,h,!1,null,null,null)),C=f.exports,_={components:{HeadBar:m,Footer:C}},y=_,b=(s("4fc0"),Object(u["a"])(y,i,o,!1,null,null,null)),w=b.exports,x=s("8c4f"),S=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("SideBar"),e("Geminichat")],1),e("div",{staticClass:"center"},[e("div",{staticClass:"c-l-header"},[e("div",{staticClass:"new btn-iconfont",class:{active:t.timeOrder},on:{click:function(e){return t.selectOrder("time")}}},[e("i",{staticClass:"iconfont icon-polygonred"}),t._v("New ")]),e("div",{staticClass:"top btn-iconfont",class:{active:t.scoreOrder},on:{click:function(e){return t.selectOrder("score")}}},[e("i",{staticClass:"iconfont icon-top"}),t._v("Score ")]),e("div",{staticClass:"search"},[e("i",{staticClass:"search-icon el-icon-search",on:{click:t.searchPost}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"s-input",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.keyword},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchPost.apply(null,arguments)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),e("div",{staticClass:"publish-btn",on:{click:t.goPublish}},[t._v("Publish")])]),e("ul",{staticClass:"c-l-list"},[t._l(t.postList,(function(s){return e("li",{key:s.post_id,staticClass:"c-l-item"},[e("div",{staticClass:"post"},[e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-up",on:{click:function(e){return t.vote(s.post_id,1)}}})]),e("span",{staticClass:"text"},[t._v(t._s(s.vote_num))]),e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-down",on:{click:function(e){return t.vote(s.post_id,-1)}}})])]),e("div",{staticClass:"l-container",on:{click:function(e){return t.goDetail(s.post_id)}}},[e("h4",{staticClass:"con-title"},[t._v(t._s(s.title))]),e("div",{staticClass:"con-memo"},[e("p",[t._v(t._s(s.content))])])])])})),e("div",{staticClass:"pagination-block"},[e("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,20,30],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)]),e("div",{staticClass:"right"},[e("div",{staticClass:"run-time-container"},[e("TimeMeter")],1),e("div",{staticClass:"github-project-card-container"},[e("TrendingNewsCard",{attrs:{language:"all"}})],1)])])])},k=[],L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"side-bar-container"},[e("div",{staticClass:"title"},[e("el-avatar",{attrs:{src:"https://www.gravatar.com/avatar/?d=mp"}}),e("router-link",{staticClass:"leave-message",attrs:{type:"primary",to:"/message"}},[e("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" Leave a Message ")]),e("el-divider",[e("i",{staticClass:"el-icon-user-solid"})])],1),t._m(0),e("div",{staticClass:"block"},[e("h2",{staticClass:"demonstration"},[t._v("Rating")]),e("el-rate",{attrs:{colors:t.colors},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),e("div",{staticClass:"message"},[e("ul",[e("li",[e("el-tag",{attrs:{type:"warning"}},[e("i",{staticClass:"el-icon-ice-tea"}),t._v(" Gmail ")])],1)])]),e("div",{staticClass:"mine"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e("span",[t._v("About me")])]),e("div",{staticClass:"text item"},[t._v(" Blah blah blah ")])])],1)])},P=[function(){var t=this,e=t._self._c;return e("p",{attrs:{align:"center"}},[t._v(" Visitor count"),e("br"),e("img",{attrs:{src:"https://profile-counter.glitch.me/mao888/count.svg"}})])}],O={name:"SideBar",data(){return{imgOptions:[],value:new Date,value2:null,colors:["#99A9BF","#F7BA2A","#FF9900"]}}},$=O,j=(s("1d3e"),Object(u["a"])($,L,P,!1,null,"c8ce06e0",null)),N=j.exports,T=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"web-status"},[t._v("ðŸš€ Status")])]),e("div",{staticClass:"run-time"})])],1)},D=[];function M(t,e){e=e||"";let s=new Date(t),a=s.getFullYear(),i=s.getMonth()+1,o=s.getDate(),n=s.getHours(),r=s.getMinutes(),l=s.getSeconds(),c=s.getMilliseconds(),u={year:a,month:i,day:o,hour:n,minute:r,second:l,milliSecond:c};return e?(e=e.trim(),"YYYY-MM-DD hh:mm:ss"===e?a+"-"+i+"-"+o+" "+n+":"+r+":"+l:"YYYY/MM/DD hh:mm:ss"===e?a+"/"+i+"/"+o+" "+n+":"+r+":"+l:"YYYY-MM-DD"===e?a+"-"+i+"-"+o:"YYYY/MM/DD"===e?a+"/"+i+"/"+o:"hh:mm:ss"===e?n+":"+r+":"+l:"hh-mm-ss"===e?n+"-"+r+"-"+l:t):u}function I(t,e,s){return s=s||0,(Array(e).join(s)+t).slice(-e)}function z(t,e){let s=new Array(0,0,0,0,0),a=31536e3,i=86400,o=3600,n=60,r=0;if(t)return e&&e.indexOf("Y")>-1&&t>=a&&(s[0]=parseInt(t/a),t%=a),t>=i&&(s[1]=parseInt(t/i),t%=i),t>=o&&(s[2]=parseInt(t/o),t%=o),t>=n&&(s[3]=parseInt(t/n),t%=n),t>r&&(s[4]=t),s}function U(t,e,s,a,i,o){let n=Math.round(new Date(Date.UTC(t,e-1,s,a,i,o)).getTime()/1e3),r=Math.round(((new Date).getTime()+288e5)/1e3);return z(r-n)}function Y(t,e){return e?"Y-D h:m:s"===e?t[0]+"Years"+t[1]+"Day"+t[2]+"Hours"+t[3]+"Minutes"+t[4]+"Seconds":"D h:m:s"===e?t[1]+"Day"+t[2]+"Hours"+t[3]+"Minutes"+t[4]+"Seconds":void 0:t[1]+" Days "+t[2]+" Hours "+t[3]+" Minutes "+t[4]+" Seconds"}function A({el:t,timeStamp:e,desc:s,year:a,month:i,day:o,hour:n,minute:r,second:l,flag:c=!0,format:u}){if(s=s||"",e){let t=M(e);a=t.year,i=t.month,o=t.day,n=t.hour,r=t.minute,l=t.second}if(!c||!t)return U(a,i,o,n,r,l);{let e=document.querySelector(t);setInterval(()=>{let t=U(a,i,o,n,r,l);t[2]=I(t[2],2,0),t[3]=I(t[3],2,0),t[4]=I(t[4],2,0),e.innerText=s+Y(t,u)},1e3)}}var R={name:"TimeMeter",data(){return{runTime:new Date("2025-4-8")}},mounted(){this.init()},methods:{init(){A({el:".run-time",timeStamp:this.runTime.getTime(),desc:"Up time: "})}}},E=R,q=(s("d5d3"),Object(u["a"])(E,T,D,!1,null,"6e3954f0",null)),F=q.exports,H=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:0,border:"none"}}},[e("h2",{staticClass:"title"},[t._v(t._s(t.title))]),e("ul",{staticClass:"trending-news-list"},[t._l(t.displayedList,(function(s,a){return e("li",{key:s.title,staticClass:"trending-news-item"},[e("div",{staticClass:"introduction"},[e("span",{staticClass:"rank"},[t._v("#"+t._s(a+1))]),e("a",{attrs:{href:s.url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(s.title))])]),e("el-divider")],1)})),t.newsList.length>0?e("div",{staticClass:"next-btn",on:{click:t.getMorenews}},[e("i",{class:t.loading}),e("span",[t._v("Load more...")])]):t._e(),t.newsList.length<=0?e("el-skeleton",{attrs:{rows:6}}):t._e()],2)])],1)],1)},B=[],G=(s("e9f5"),s("7d54"),{name:"TrendingNewsCard",props:{title:{type:String,require:!0,default:"Trending News"},language:{type:String,require:!0,default:"all"},sortType:{type:String,require:!0,default:"desc"},pageSize:{type:Number,require:!0,default:3}},data(){return{pageNumber:1,newsList:[],displayedList:[],tagColors:{typeScript:"#3178c6",javaScript:"#f1e05a",html:"#e34c26",css:"#563d7c",java:"orange",python:"#3572A5",golang:"#00ADD8",go:"#00ADD8",shell:"#89e051","c++":"#f34b7d",other:"#ededed"},loading:""}},created(){this.getnews()},methods:{handleNumber(t){return t>=1e3?(t/=1e3,Math.round(t)+"k"):t},handleTagColor(t){let e=this.tagColors["other"];return t?(Object.keys(this.tagColors).forEach(s=>{s.toLowerCase()===t.toLowerCase()&&(e=this.tagColors[s])}),e):e},async getnews(){const t="/news";let e=await this.$axios.get(t);this.newsList=e.articles,this.displayedList=this.newsList.slice(0,5),console.log(this.newsList)},async getMorenews(){this.loading="el-icon-loading";const t=Math.min(this.displayedList.length+3,this.newsList.length);this.displayedList=this.newsList.slice(0,t),this.loading=""}}}),J=G,W=(s("6785"),Object(u["a"])(J,H,B,!1,null,"f62a8118",null)),V=W.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-container"},[e("div",{staticClass:"chat-header",on:{click:t.toggleChat}},[t._v(" "+t._s(t.isOpen?"âœ– CLOSE":"ðŸ’¬ Chat with Gemini")+" ")]),t.isOpen?e("div",{staticClass:"chat-box"},[e("div",{staticClass:"messages"},t._l(t.messages,(function(s,a){return e("div",{key:a,class:["message",s.role]},[e("span",[t._v(t._s(s.text))])])})),0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userInput,expression:"userInput"}],staticClass:"chat-input",attrs:{placeholder:"Type your question...",disabled:t.loading},domProps:{value:t.userInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},input:function(e){e.target.composing||(t.userInput=e.target.value)}}}),t.loading?e("button",{staticClass:"loading-btn"},[t._v("sending...")]):t._e()]):t._e()])},Q=[],X=(s("d9e2"),s("bc3a")),Z=s.n(X),tt={data(){return{isOpen:!1,userInput:"",messages:[],loading:!1,apiUrl:"/gemini"}},methods:{toggleChat(){this.isOpen=!this.isOpen},async sendMessage(){if(!this.userInput.trim())return;this.messages.push({role:"user",text:this.userInput}),this.loading=!0;const t=this.userInput;this.userInput="";try{console.log("ðŸ“¡ å‘é€è¯·æ±‚åˆ°:",this.apiUrl);const e=await Z.a.post(this.apiUrl,{message:t});if(console.log("ðŸŒ API å®Œæ•´å“åº”:",e),console.log("ðŸŒ API å“åº”æ•°æ®:",e.reply),!e||!e.reply)throw new Error("API å“åº”ä¸ºç©º");const s=e.reply||"æœªæ”¶åˆ° Gemini å“åº”";this.messages.push({role:"bot",text:s})}catch(e){console.error("âŒ Gemini API é”™è¯¯:",e),this.messages.push({role:"bot",text:"è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•"})}finally{this.loading=!1}}}},et=tt,st=(s("e637"),Object(u["a"])(et,K,Q,!1,null,"5fc23d14",null)),at=st.exports,it={name:"Home",components:{TimeMeter:F,SideBar:N,TrendingNewsCard:V,Geminichat:at},data(){return{order:"time",postList:[],pageNumber:1,pageSize:5,pageTotal:{},keyword:"",isSearch:!1}},methods:{selectOrder(t){this.order=t,this.getPostList()},handleCurrentChange(t){this.pageNumber=t,this.isSearch?this.searchPost():this.getPostList()},handleSizeChange(t){this.pageSize=t,this.isSearch?this.searchPost():this.getPostList()},goDetail(t){this.$router.push({name:"Content",params:{id:t}})},getPostList(){this.$axios({method:"get",url:"/posts2",params:{page:this.pageNumber,size:this.pageSize,order:this.order}}).then(t=>{console.log(t.data,222),1e3==t.code?(this.postList=t.data.list,this.pageTotal=t.data.page):console.log(t.msg)}).catch(t=>{console.log(t)})},goPublish(){this.$router.push({name:"Publish"})},vote(t,e){this.$axios({method:"post",url:"/vote",data:{post_id:t,direction:e}}).then(t=>{1e3==t.code?(console.log("vote success"),this.getPostList()):1009==t.code?a["default"].prototype.$message.error("You can only vote once"):1010==t.code?a["default"].prototype.$message.error("The voting time has passed"):(console.log(t.msg),a["default"].prototype.$message.error("Please login first"))}).catch(t=>{console.log(t)})},async searchPost(){if(!this.keyword)return this.isSearch=!1,void this.getPostList();this.isSearch=!0;const t=await this.$axios({method:"get",url:"/search",params:{page:this.pageNumber,size:this.pageSize,search:this.keyword}});1e3===t.code?(console.log(t.data),this.postList=t.data.list,this.pageTotal=t.data.page):console.log(t.message)}},mounted:function(){this.getPostList()},computed:{timeOrder(){return"time"==this.order},scoreOrder(){return"score"==this.order}}},ot=it,nt=(s("ea9a"),Object(u["a"])(ot,S,k,!1,null,"2924de98",null)),rt=nt.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"container"},[e("div",{staticClass:"post"},[e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-up",on:{click:function(e){return t.vote(t.post.post_id,1)}}})]),e("span",{staticClass:"text"},[t._v(t._s(t.post.vote_num))]),e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-down",on:{click:function(e){return t.vote(t.post.post_id,-1)}}})])]),e("div",{staticClass:"l-container"},[e("h4",{staticClass:"con-title"},[t._v(t._s(t.post.title))]),e("div",{staticClass:"con-info markdown-body",domProps:{innerHTML:t._s(t.post.content)}})])]),e("Comment",{attrs:{sourceId:this.$route.params.id}})],1),e("div",{staticClass:"right"},[e("div",{staticClass:"topic-info"},[e("h5",{staticClass:"t-header"}),e("div",{staticClass:"t-info"},[e("a",{staticClass:"avatar"}),e("span",{staticClass:"topic-name"},[t._v("b/"+t._s(t.post.community.community_name))])]),e("p",{staticClass:"t-desc"},[t._v(t._s(t.post.community.introduction))]),e("p",{staticClass:"t-create-time"},[t._v(t._s(t.post.community.create_time))]),e("div",{staticClass:"date"},[t._v(t._s(t.create_time))]),e("button",{staticClass:"topic-btn",on:{click:function(e){return t.goCommunityDetail(t.post.community.community_id)}}},[t._v("JOIN")])])])])},ct=[],ut=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"SOHUCS",sid:t.sourceId}}),e("a",{attrs:{href:"#SOHUCS",id:"changyan_count_unit"}}),e("a",{attrs:{href:"#SOHUCS",id:"changyan_parti_unit"}})])},dt=[],mt={name:"Comment",props:{sourceId:{type:Number,require:!1,default:-1}},mounted(){(function(){var t="cywE58eoF",e="prod_287c236820392be64661bae328651187",s=window.innerWidth||document.documentElement.clientWidth;if(s<1e3){var a=document.getElementsByTagName("head")[0]||document.head||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.id="changyan_mobile_js",i.src="https://cy-cdn.kuaizhan.com/upload/mobile/wap-js/changyan_mobile.js?client_id="+t+"&conf="+e,a.appendChild(i)}else{var o=function(t,e){var s=document.getElementsByTagName("head")[0]||document.head||document.documentElement,a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("charset","UTF-8"),a.setAttribute("src",t),"function"===typeof e&&(window.attachEvent?a.onreadystatechange=function(){var t=a.readyState;"loaded"!==t&&"complete"!==t||(a.onreadystatechange=null,e())}:a.onload=e),s.appendChild(a)};o("https://cy-cdn.kuaizhan.com/upload/changyan.js",(function(){window.changyan.api.config({appid:t,conf:e})}))}})()}},pt=mt,ht=Object(u["a"])(pt,ut,dt,!1,null,null,null),gt=ht.exports,vt={name:"Content",components:{Comment:gt},data(){return{post:{}}},methods:{getPostDetail(){this.$axios({method:"get",url:"/post/"+this.$route.params.id}).then(t=>{if(console.log(1,t.data),1e3==t.code){let e=s("d4cd"),a=new e;this.post=t.data,this.post.content=a.render(this.post.content)}else console.log(t.msg)}).catch(t=>{console.log(t)})},vote(t,e){this.$axios({method:"post",url:"/vote",data:{post_id:t,direction:e}}).then(t=>{1e3==t.code?(console.log("vote success"),this.getPostDetail()):1009==t.code?a["default"].prototype.$message.error("You can only vote once"):1010==t.code?a["default"].prototype.$message.error("The voting time has passed"):(console.log(t.msg),a["default"].prototype.$message.error("Please login first"))}).catch(t=>{console.log(t)})},goCommunityDetail(t){this.$router.push({name:"Community",params:{id:t}})}},mounted(){this.getPostDetail()}},ft=vt,Ct=(s("1bb5"),Object(u["a"])(ft,lt,ct,!1,null,"491d247e",null)),_t=Ct.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"center"},[e("ul",{staticClass:"c-l-list"},[t._l(t.postList,(function(s){return e("li",{key:s.post_id,staticClass:"c-l-item"},[e("div",{staticClass:"post"},[e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-up",on:{click:function(e){return t.vote(s.post_id,1)}}})]),e("span",{staticClass:"text"},[t._v(t._s(s.vote_num))]),e("a",{staticClass:"vote"},[e("span",{staticClass:"iconfont icon-down",on:{click:function(e){return t.vote(s.post_id,-1)}}})])]),e("div",{staticClass:"l-container",on:{click:function(e){return t.goDetail(s.post_id)}}},[e("h4",{staticClass:"con-title"},[t._v(t._s(s.title))]),e("div",{staticClass:"con-memo"},[e("p",[t._v(t._s(s.content))])])])])})),e("div",{staticClass:"pagination-block"},[e("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,20,30],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)]),e("div",{staticClass:"right"},[e("div",{staticClass:"topic-info"},[e("h5",{staticClass:"t-header"}),e("div",{staticClass:"t-info"},[e("a",{staticClass:"avatar"}),e("span",{staticClass:"topic-name"},[t._v("b/"+t._s(t.community.community_name))]),e("span",{staticClass:"publish",on:{click:t.goPublish}},[t._v("Publish")])]),e("p",{staticClass:"t-desc"},[t._v(t._s(t.community.introduction))]),e("p",{staticClass:"t-create-time"},[t._v(t._s(t.community.create_time))])])])])},bt=[],wt={name:"Community",data(){return{postList:[],pageTotal:{},community:{},pageNumber:1,pageSize:5}},methods:{handleCurrentChange(t){this.pageNumber=t,this.getCommunityPostList()},handleSizeChange(t){this.pageSize=t,this.getCommunityPostList()},getCommunityDetail(){this.$axios({method:"get",url:"/community/"+this.$route.params.id}).then(t=>{console.log(t.data),1e3==t.code?this.community=t.data:console.log(t.msg)}).catch(t=>{console.log(t)})},getCommunityPostList(){this.$axios({method:"get",url:"/posts2",params:{community_id:this.$route.params.id,page:this.pageNumber,size:this.pageSize,order:"score"}}).then(t=>{console.log(1,t.data),1e3==t.code?(this.postList=t.data.list,this.pageTotal=t.data.page):console.log(t.msg)}).catch(t=>{console.log(t)})},vote(t,e){this.$axios({method:"post",url:"/vote",data:{post_id:t,direction:e}}).then(t=>{1e3==t.code?(console.log("vote success"),this.getCommunityPostList()):1009==t.code?a["default"].prototype.$message.error("You can only vote once"):console.log(t.msg)}).catch(t=>{console.log(t)})},goDetail(t){this.$router.push({name:"Content",params:{id:t}})},goPublish(){this.$router.push({name:"Publish"})}},mounted(){this.getCommunityDetail(),this.getCommunityPostList()}},xt=wt,St=(s("a5e0"),Object(u["a"])(xt,yt,bt,!1,null,"12535c63",null)),kt=St.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-container"},[e("Comment",{attrs:{sourceId:-1}})],1)},Pt=[],Ot={name:"Message",components:{Comment:gt}},$t=Ot,jt=(s("495f"),Object(u["a"])($t,Lt,Pt,!1,null,"4566b347",null)),Nt=jt.exports,Tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"post-name"},[t._v("Write anything")]),e("div",{staticClass:"post-type"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectCommunity.community_name,expression:"selectCommunity.community_name"}],staticClass:"post-type-value",attrs:{type:"text",placeholder:"Pick a type"},domProps:{value:t.selectCommunity.community_name},on:{click:function(e){return t.showCommunity()},input:function(e){e.target.composing||t.$set(t.selectCommunity,"community_name",e.target.value)}}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.showCommunityList,expression:"showCommunityList"}],staticClass:"post-type-options"},t._l(t.communityList,(function(s,a){return e("li",{key:s.id,staticClass:"post-type-cell",on:{click:function(e){return t.selected(a)}}},[t._v(" "+t._s(s.community_name)+" ")])})),0),e("i",{staticClass:"p-icon"})]),e("div",{staticClass:"post-sub-container"},[e("div",{staticClass:"post-sub-header"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"post-title",attrs:{id:"",cols:"30",rows:"10",placeholder:"Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),e("span",{staticClass:"textarea-num"},[t._v("100")])]),e("div",{staticClass:"post-text-con"},[e("mavon-editor",{staticStyle:{"max-height":"600px"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),e("div",{staticClass:"post-footer"},[e("div",{staticClass:"btns"},[e("button",{staticClass:"btn"},[t._v("Cancel")]),e("button",{staticClass:"btn",on:{click:function(e){return t.submit()}}},[t._v("Publish")])])])]),t._m(0)])},Dt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"right"},[e("div",{staticClass:"post-rank"},[e("h5",{staticClass:"p-r-title"},[e("i",{staticClass:"p-r-icon"}),t._v("Rules ")]),e("ul",{staticClass:"p-r-content"},[e("li",{staticClass:"p-r-item"},[t._v("Jk, there is no rule")])])])])}],Mt={name:"Publish",data(){return{title:"",content:"",showCommunityList:!1,selectCommunity:{},communityList:[]}},methods:{submit(){this.$axios({method:"post",url:"/post",data:{title:this.title,content:this.content,community_id:this.selectCommunity.community_id}}).then(t=>{console.log(t.data),1e3==t.code?this.$router.push({path:this.redirect||"/"}):console.log(t.msg)}).catch(t=>{console.log(t)})},getCommunityList(){this.$axios({method:"get",url:"/community"}).then(t=>{console.log(t.data),1e3==t.code?this.communityList=t.data:console.log(t.msg)}).catch(t=>{console.log(t)})},showCommunity(){this.showCommunityList=!this.showCommunityList},selected(t){this.selectCommunity=this.communityList[t],this.showCommunityList=!1,console.log(this.selectCommunity)}},mounted:function(){this.getCommunityList()}},It=Mt,zt=(s("64eb"),Object(u["a"])(It,Tt,Dt,!1,null,"088ea66b",null)),Ut=zt.exports,Yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"container"},[e("h2",{staticClass:"form-title"},[t._v("Login")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"name",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"pass"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"pass",id:"pass",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"form-btn"},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.submit}},[t._v("Submit")])])])])},At=[],Rt={name:"Login",data(){return{username:"",password:"",submitted:!1}},computed:{},created(){},methods:{submit(){this.$axios({method:"post",url:"/login",data:JSON.stringify({username:this.username,password:this.password})}).then(t=>{console.log(t.data),1e3==t.code?(localStorage.setItem("loginResult",JSON.stringify(t.data)),this.$store.commit("login",t.data),this.$router.push({path:this.redirect||"/"})):console.log(t.msg)}).catch(t=>{console.log(t)})}}},Et=Rt,qt=(s("6bfc"),Object(u["a"])(Et,Yt,At,!1,null,"12208ee2",null)),Ft=qt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"container"},[e("h2",{staticClass:"form-title"},[t._v("Sign Up")]),e("div",{staticClass:"form-group"},[t._m(0),e("el-input",{attrs:{type:"text",required:"",name:"name",id:"name",placeholder:"Username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"form-group"},[t._m(1),e("el-input",{attrs:{type:"email",required:"",name:"email",id:"email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),e("div",{staticClass:"form-group"},[t._m(2),e("el-input",{attrs:{type:"password",required:"",name:"pass",id:"pass",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("div",{staticClass:"form-group"},[t._m(3),e("el-input",{attrs:{type:"password",required:"",name:"re_pass",id:"re_pass",placeholder:"Re-enter Password"},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}})],1),e("div",{staticClass:"form-group"},[t._m(4),e("div",{attrs:{id:"gender"}},[e("el-radio",{attrs:{label:1},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}},[t._v("Male")]),e("el-radio",{attrs:{label:2},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}},[t._v("Female")])],1)]),e("div",{staticClass:"form-btn"},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.submit}},[t._v("Submit")])])])])},Bt=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"name"}},[e("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("Username")])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"email"}},[e("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("Email")])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"pass"}},[e("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("Password")])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"re_pass"}},[e("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("Comfirm Password")])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"gender"}},[e("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("Gender")])}],Gt={name:"SignUp",data(){return{username:"",password:"",email:"",gender:1,confirm_password:"",submitted:!1}},computed:{},created(){},methods:{submit(){this.$axios({method:"post",url:"/signup",data:{username:this.username,email:this.email,gender:this.gender,password:this.password,confirm_password:this.confirm_password}}).then(t=>{console.log(t.data),1e3==t.code?(console.log("signup success"),this.$router.push({name:"Login"})):console.log(t.msg)}).catch(t=>{console.log(t)})}}},Jt=Gt,Wt=(s("9d63"),Object(u["a"])(Jt,Ht,Bt,!1,null,"1d682a23",null)),Vt=Wt.exports;const Kt=x["a"].prototype.push;x["a"].prototype.push=function(t){return Kt.call(this,t).catch(t=>t)},a["default"].use(x["a"]);const Qt=[{path:"/",name:"Home",component:rt},{path:"/post/:id",name:"Content",component:_t},{path:"/community/:id",name:"Community",component:kt},{path:"/message",name:"Message",component:Nt},{path:"/publish",name:"Publish",component:Ut,meta:{requireAuth:!0}},{path:"/login",name:"Login",component:Ft},{path:"/signup",name:"SignUp",component:Vt}],Xt=new x["a"]({mode:"history",base:"/",routes:Qt});var Zt=Xt,te=s("2f62");a["default"].use(te["a"]);const ee={token:null,user_id:null,user_name:null};var se=new te["a"].Store({state:{isLogin:!1,loginResult:ee},mutations:{init(t){let e=JSON.parse(localStorage.getItem("loginResult"));console.log(localStorage.getItem("loginResult")),null!=e&&(t.loginResult=e)},login(t,e){t.loginResult=e},logout(t){localStorage.removeItem("loginResult"),t.loginResult=ee}},actions:{},getters:{isLogin:t=>null!==t.loginResult.user_id,userID:t=>t.loginResult.user_id,username:t=>t.loginResult.user_name,accessToken:t=>t.loginResult.token}});Z.a.defaults.baseURL="/api/v1/",Z.a.interceptors.request.use(t=>{let e=JSON.parse(localStorage.getItem("loginResult"));if(e){const s=e.access_token;t.headers.Authorization="Bearer "+s}return t},t=>Promise.reject(t)),Z.a.interceptors.response.use(t=>200===t.status?Promise.resolve(t.data):Promise.reject(t.data),t=>{console.log("error",t)});var ae=Z.a,ie=s("5c96"),oe=s.n(ie),ne=(s("0fae"),s("b2d8")),re=s.n(ne),le=(s("64e1"),s("e4cb"),s("b2d6")),ce=s.n(le);a["default"].use(oe.a,{locale:ce.a}),a["default"].use(re.a),a["default"].prototype.Free=window.Free,a["default"].prototype.$axios=ae,a["default"].config.productionTip=!1,Zt.beforeEach((t,e,s)=>{console.log(t),console.log(e),t.meta.requireAuth?localStorage.getItem("loginResult")||"/login"===t.path?s():s({path:"/login"}):s(),"/login"==t.fullPath&&(localStorage.getItem("loginResult")?s({path:e.fullPath}):s())}),Zt.afterEach(()=>{document.title="Gophers"}),new a["default"]({router:Zt,store:se,render:t=>t(w)}).$mount("#app")},"5b38":function(t,e,s){},"5c20":function(t,e,s){},"64eb":function(t,e,s){"use strict";s("5b38")},6785:function(t,e,s){"use strict";s("a8e1")},"6bfc":function(t,e,s){"use strict";s("ea33")},"7a44":function(t,e,s){},"91e9":function(t,e,s){},"97d8":function(t,e,s){},9907:function(t,e,s){},"9d63":function(t,e,s){"use strict";s("4f34")},a1da:function(t,e,s){},a5e0:function(t,e,s){"use strict";s("a1da")},a8e1:function(t,e,s){},b1af:function(t,e,s){"use strict";s("9907")},d5d3:function(t,e,s){"use strict";s("2141")},e518:function(t,e,s){},e637:function(t,e,s){"use strict";s("02be")},ea33:function(t,e,s){},ea9a:function(t,e,s){"use strict";s("91e9")}});
//# sourceMappingURL=app.c45bf1bb.js.map